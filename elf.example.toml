[service]
admin_bind = "127.0.0.1:8090"
http_bind  = "127.0.0.1:8089"
log_level  = "info"
mcp_bind   = "127.0.0.1:8091"

[storage.postgres]
dsn            = "postgres://postgres:postgres@127.0.0.1:5432/elf"
pool_max_conns = 10

[storage.qdrant]
collection = "mem_notes_v1"
url        = "http://127.0.0.1:6334"
vector_dim = 4096

[providers.embedding]
api_key         = "REPLACE_ME"
base_url        = "https://provider.example/v1"
default_headers = {}
dimensions      = 4096
model           = "embedding-model"
path            = "/embeddings"
provider_id     = "provider-id"
timeout_ms      = 20000

[providers.rerank]
api_key         = "REPLACE_ME"
base_url        = "https://provider.example/v1"
default_headers = {}
model           = "rerank-model"
path            = "/rerank"
provider_id     = "provider-id"
timeout_ms      = 20000

[providers.llm_extractor]
api_key         = "REPLACE_ME"
base_url        = "https://provider.example/v1"
default_headers = {}
model           = "llm-model"
path            = "/chat/completions"
provider_id     = "provider-id"
temperature     = 0.1
timeout_ms      = 30000

[scopes]
allowed = ["agent_private", "org_shared", "project_shared"]

[scopes.read_profiles]
all_scopes           = ["agent_private", "org_shared", "project_shared"]
private_only         = ["agent_private"]
private_plus_project = ["agent_private", "project_shared"]

[scopes.precedence]
agent_private  = 30
org_shared     = 10
project_shared = 20

[scopes.write_allowed]
agent_private  = true
org_shared     = true
project_shared = true

[memory]
candidate_k             = 60
dup_sim_threshold       = 0.92
max_note_chars          = 240
max_notes_per_add_event = 3
top_k                   = 12
update_sim_threshold    = 0.85

[ranking]
recency_tau_days   = 60
tie_breaker_weight = 0.1

[lifecycle.ttl_days]
constraint = 0
decision   = 0
fact       = 180
plan       = 14
preference = 0
profile    = 0

[lifecycle]
purge_deleted_after_days    = 30
purge_deprecated_after_days = 180

[security]
bind_localhost_only      = true
evidence_max_quote_chars = 320
evidence_max_quotes      = 2
evidence_min_quotes      = 1
redact_secrets_on_write  = true
reject_cjk               = true
