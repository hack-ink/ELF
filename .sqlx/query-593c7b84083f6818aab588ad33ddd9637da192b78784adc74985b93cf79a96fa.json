{
  "db_name": "PostgreSQL",
  "query": "WITH hits AS (\n\tSELECT *\n\tFROM unnest(\n\t$1::uuid[],\n\t$2::uuid[],\n\t$3::uuid[],\n\t$4::int4[],\n\t$5::real[]\n) AS t(hit_id, note_id, chunk_id, rank, final_score)\n),\nupdated AS (\nUPDATE memory_notes\nSET\n\thit_count = hit_count + 1,\n\tlast_hit_at = $6\nWHERE note_id = ANY($2)\n)\nINSERT INTO memory_hits (\n\thit_id,\n\tnote_id,\n\tchunk_id,\n\tquery_hash,\n\trank,\n\tfinal_score,\n\tts\n)\nSELECT\n\thit_id,\n\tnote_id,\n\tchunk_id,\n\t$7,\n\trank,\n\tfinal_score,\n\t$6\nFROM hits",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "UuidArray",
        "UuidArray",
        "UuidArray",
        "Int4Array",
        "Float4Array",
        "Timestamptz",
        "Text"
      ]
    },
    "nullable": []
  },
  "hash": "593c7b84083f6818aab588ad33ddd9637da192b78784adc74985b93cf79a96fa"
}
