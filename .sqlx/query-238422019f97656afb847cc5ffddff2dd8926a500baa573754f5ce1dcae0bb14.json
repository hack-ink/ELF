{
  "db_name": "PostgreSQL",
  "query": "WITH hits AS (\n\t\tSELECT *\n\t\tFROM unnest(\n\t\t$1::uuid[],\n\t\t$2::uuid[],\n\t\t$3::uuid[],\n\t\t$4::int4[],\n\t\t$5::real[]\n\t) AS t(hit_id, note_id, chunk_id, rank, final_score)\n),\nupdated AS (\n\tUPDATE memory_notes\n\tSET\n\t\thit_count = hit_count + 1,\n\t\tlast_hit_at = $6\n\tWHERE note_id = ANY($2)\n)\nINSERT INTO memory_hits (\n\thit_id,\n\tnote_id,\n\tchunk_id,\n\tquery_hash,\n\trank,\n\tfinal_score,\n\tts\n)\nSELECT\n\thit_id,\n\tnote_id,\n\tchunk_id,\n\t$7,\n\trank,\n\tfinal_score,\n\t$6\n\tFROM hits",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "UuidArray",
        "UuidArray",
        "UuidArray",
        "Int4Array",
        "Float4Array",
        "Timestamptz",
        "Text"
      ]
    },
    "nullable": []
  },
  "hash": "238422019f97656afb847cc5ffddff2dd8926a500baa573754f5ce1dcae0bb14"
}
